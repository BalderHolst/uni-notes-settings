{"path":"Lessons/Semester 2/Kinematik/Lecture 11 - Jacobian Singularities Numerical IK and Trajectory Generation.pdf","text":"Lecture 11: More about Jacobians & Trajectory Generation IÃ±igo Iturrate Assistant Professor SDU Robotics, The Maersk McKinney Moller Institute, University of Southern Denmark inju@mmmi.sdu.dk Ã˜27-604-3 2 Recap (Exercise, 10 min.) Discuss with your neighbors (5 min.): In the context of robotics: 1. Why do we use the Jacobian? 2. How is the matrix structured? 3. What can we say about its individual elements in relation to how the robot moves in joint/Cartesian space? Then share with me what you have discussed (5 min.). 3 What did we derive last time? We wanted to find: Ì‡ğ’™ğ’™ = ? â‹¯ ? â‹® â‹± â‹® ? â‹¯ ? Ì‡ğ’’ğ’’ Insert joint velocity vector here Do some sorcery here Get end-effector velocity here (This sorcery is called the Jacobian Matrix) Ì‡ğ’™ğ’™ = ğ‘±ğ‘±(ğ’’ğ’’) Ì‡ğ’’ğ’’ 4 The Two Jacobians in Robotics Remember that we can describe Cartesian-space velocity in (at least) two ways, depending on how we describe rotational velocity: â€¢ Using angular velocity: Ì‡ğ’™ğ’™ = Ì‡ğ’‘ğ’‘ ğğ â€¢ Using the derivative of Euler angles: Ì‡ğ’™ğ’™ = ğ’—ğ’— = Ì‡ğ’‘ğ’‘ Ì‡ğ“ğ“ We can split the Jacobian in two: ğ‘±ğ‘± = ğ‘±ğ‘±ğ‘ƒğ‘ƒ ğ‘±ğ‘±ğ‘‚ğ‘‚ ğ‘±ğ‘±ğ‘‚ğ‘‚ based on angular velocity ğ‘±ğ‘±ğ‘‚ğ‘‚ based on derivative of Euler angles Geometric Jacobian Analytical Jacobian Jacobian for Orientation Jacobian for Position (This stays the same) We will only study this 5 Building a Geometric Jacobian We first split the matrix into 3 Ã— 1 column vectors, ğ‘±ğ‘±ğ‘ƒğ‘ƒğ‘–ğ‘– and ğ‘±ğ‘±ğ‘‚ğ‘‚ğ‘–ğ‘–, where each element ğ‘–ğ‘– represents the contribution of a single joint ğ‘ğ‘ğ‘–ğ‘– to either the position or orientation: ğ‘±ğ‘± = ğ‘±ğ‘±ğ‘ƒğ‘ƒğ‘ƒ ğ‘±ğ‘±ğ‘ƒğ‘ƒğ‘ƒğ‘ƒ â‹¯ ğ‘±ğ‘±ğ‘‚ğ‘‚ğ‘ƒ ğ‘±ğ‘±ğ‘‚ğ‘‚ğ‘ƒğ‘ƒ ğ‘±ğ‘±ğ‘ƒğ‘ƒğ‘–ğ‘– = ğ½ğ½ğ‘ƒğ‘ƒğ‘–ğ‘–,ğ‘¥ğ‘¥ ğ½ğ½ğ‘ƒğ‘ƒğ‘–ğ‘–,ğ‘¦ğ‘¦ ğ½ğ½ğ‘ƒğ‘ƒğ‘–ğ‘–,ğ‘§ğ‘§ ğ‘±ğ‘±ğ‘‚ğ‘‚ğ‘–ğ‘– = ğ½ğ½ğ‘‚ğ‘‚ğ‘–ğ‘–,ğœ”ğœ”ğ‘¥ğ‘¥ ğ½ğ½ğ‘‚ğ‘‚ğ‘–ğ‘–,ğœ”ğœ”ğ‘¦ğ‘¦ ğ½ğ½ğ‘‚ğ‘‚ğ‘–ğ‘–,ğœ”ğœ”ğ‘§ğ‘§ Then, for each joint ğ‘–ğ‘–: â€¢ Revolute: ğ‘±ğ‘±ğ‘ƒğ‘ƒğ‘–ğ‘– = 0Ì‚ğ‘ğ‘ğ‘–ğ‘– Ã— 0ğ‘ƒğ‘ƒğ‘’ğ‘’ âˆ’ 0ğ‘ƒğ‘ƒğ‘–ğ‘– ğ‘±ğ‘±ğ‘‚ğ‘‚ğ‘–ğ‘– = 0Ì‚ğ‘ğ‘ğ‘–ğ‘– â€¢ Prismatic: ğ‘±ğ‘±ğ‘ƒğ‘ƒğ‘–ğ‘– = 0Ì‚ğ‘ğ‘ğ‘–ğ‘– ğ‘±ğ‘±ğ‘‚ğ‘‚ğ‘–ğ‘– = 0 0Ì‚ğ‘ğ‘ğ‘–ğ‘– = ğ‘–ğ‘– 0ğ‘…ğ‘… 0 0 1 0ğ‘ƒğ‘ƒğ‘’ğ‘’ is the position of the end-effector 0ğ‘ƒğ‘ƒğ‘–ğ‘– is the position of the origin of frame {i} 6 What are we doing today? 1. CAD Modelling in Autodesk Inventor â€“ Guest Lecture by Aljaz Kramberger 2. CAD Assemblies in Autodesk Inventor â€“ Guest Lecture by Aljaz Kramberger 3. Introduction to Robotics & Recap of Linear Algebra and Mathematical Notation 4. Translations & Rotation Matrices 5. Other Representations for Orientation 6. Transformation Matrices 7. DH Parameters & Forward Kinematics 8. Inverse Kinematics 9. Kinematic Simulation 10. Velocity Kinematics & the Jacobian Matrix 11. More about the Jacobian & Trajectory Generation (Today) 12. Manipulability, More on the Robotic Systems Toolbox 7 Topics for Today Part I: The Jacobian Matrix & Singularities â€¢ Forward & Inverse Velocity Kinematics â€¢ Using the Jacobian for Numerical IK (conceptually) â€¢ Singularities as seen: ï‚§ From the Jacobian ï‚§ From Analytical (closed-form) solutions to IK Part II: Trajectory Generation â€¢ Point-to-point (PTP) movements ï‚§ In Joint space and Cartesian space (position only!) â€¢ Trapezoidal velocity profiles â€¢ Quadratic, Cubic and Higher-order Polynomials â€¢ Chaining multiple PTP movements Part I: Using the Jacobian Matrix & Singularities 9 Forward and Inverse Velocity Kinematics Ì‡ğ’’ğ’’ = ğ‘±ğ‘±âˆ’ğ‘ƒ(ğ’’ğ’’) Ì‡ğ’™ğ’™Ì‡ğ’™ğ’™ = ğ‘±ğ‘±(ğ’’ğ’’) Ì‡ğ’’ğ’’ Given the forward velocity kinematics equation, and assuming that the inverse of the Jacobian exists, we can obtain the inverse velocity kinematics equation: This is a very important result in robotics. The forward/inverse veocity kinematics equations are the basis of numerical IK methods. 10 The Problem with the Jacobian Inverse Consider the inverse velocity kinematics equation: Ì‡ğ’’ğ’’ = ğ‘±ğ‘±âˆ’ğ‘ƒ(ğ’’ğ’’) Ì‡ğ’™ğ’™ Do you see any potential issues here? Soâ€¦ what happens then? Not all matrices have an inverseâ€¦ This does not always exist! 11 Singularities: Non-existence of inverse When does the inverse of a matrix not exist? Due to a non-square matrix: â€¢ Example: a redundant robot (e.g. 7-DOF in a 3D space) Ì‡ğ’™ğ’™ = ğ‘±ğ‘± ğ’’ğ’’ Ì‡ğ’’ğ’’ Ì‡ğ’‘ğ’‘ ğğ = ğ‘±ğ‘±ğ‘ƒğ‘ƒğ‘ƒ ğ‘±ğ‘±ğ‘ƒğ‘ƒğ‘ƒ â‹¯ ğ‘±ğ‘±ğ‘‚ğ‘‚ğ‘ƒ ğ‘±ğ‘±ğ‘‚ğ‘‚ğ‘ƒ ğ‘ğ‘ğ‘ƒ â‹® ğ‘ğ‘ğ‘ƒ Due to a rank-defficient square matrix (6 Ã— 1) (6 Ã— 7) (7 Ã— 1) 12 Rank & Determinant of the Jacobian Remember: The rank of a matrix is the number of linearly independent columns. Full rank: The rank of the matrix is the maximum possible for a matrix of that size. Rank-defficient/singular: The matrix is not full rank. â€¢ The robot cannot move in one or more directions. â€¢ At a singular configuration, the determinant of the Jacobian will be zero (and close to zero when close to a singularity). Discuss: Think about this last statement in connection with: â€¢ The definition of the inverse of a matrix: ğ‘±ğ‘±âˆ’ğŸğŸ = ğ‘ƒ det ğ‘±ğ‘± adj ğ‘±ğ‘± â€¢ The inverse velocity kinematics equation: Ì‡ğ’’ğ’’ = ğ‘±ğ‘±âˆ’ğ‘ƒ(ğ’’ğ’’) Ì‡ğ’™ğ’™ What can we conclude about the joint velocities of a robot when moving close to a singularity? 13 Singularities â€“ Example: UR Robot 14 Singularities of UR: Relating them to IK Solutions Wrist singularity â€¢ Axes of joints 4 and 6 parallel â€¢ ğœƒğœƒ5= 0Â°, ğœƒğœƒ5= Â±180Â° or ğœƒğœƒ5= Â±360Â° Elbow singularity â€¢ Axes of joints 2, 3 and 4 coplanar â€¢ ğœƒğœƒ3= 0Â° Shoulder singularity â€¢ Intersection of axes of joints 5 and 6 coplanar with axes of joints 1 and 2. 15 Practical Applications of the Jacobian The Jacobian is used everywhere in robotics: â€¢ Numerical Inverse Kinematics ïƒ  We will look at this (conceptually) now â€¢ Manipulability Metrics (checking how â€freeâ€ the robot is to move/apply a force in each direction) ïƒ  We will study this next lecture â€¢ Robot Control ï‚§ Position Control ï‚§ Velocity Control ï‚§ Force Control You will study this in other courses 16 Numerical Inverse Kinematics: Conceptually We are here We want to move here ğ’™ğ’™ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ , ğ’’ğ’’ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘  ğ’™ğ’™ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘¡ğ‘¡ğ‘’ğ‘’ğ‘ ğ‘  1. We know: ğ’™ğ’™ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ , ğ’’ğ’’ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ’™ğ’™ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘¡ğ‘¡ğ‘’ğ‘’ğ‘ ğ‘  2. We want to find: ğ’’ğ’’ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘¡ğ‘¡ğ‘’ğ‘’ğ‘ ğ‘  3. We can calculate: âˆ†ğ’™ğ’™ = ğ’™ğ’™ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘¡ğ‘¡ğ‘’ğ‘’ğ‘ ğ‘  âˆ’ ğ’™ğ’™ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘  4. We take âˆ†ğ’™ğ’™ and split it in smaller segments: 5. We make a very small step in the direction of âˆ†ğ’™ğ’™: ğ’…ğ’…ğ’’ğ’’ ğ‘¡ğ‘¡ = ğ‘±ğ‘± âˆ’ğ‘ƒ ğ’’ğ’’ ğ’…ğ’…ğ’™ğ’™ ğ‘¡ğ‘¡ ğ’’ğ’’ ğ‘¡ğ‘¡ + ğ‘‘ğ‘‘ğ‘¡ğ‘¡ = ğ’’ğ’’ ğ‘¡ğ‘¡ + ğ’…ğ’…ğ’’ğ’’ ğ‘¡ğ‘¡ ğ‘‘ğ‘‘ğ‘¡ğ‘¡ 6. We re-calculate: ğ‘±ğ‘± ğ’’ğ’’ ğ‘¡ğ‘¡ + ğ‘‘ğ‘‘ğ‘¡ğ‘¡ , ğ’™ğ’™(ğ‘¡ğ‘¡ + ğ‘‘ğ‘‘ğ‘¡ğ‘¡) (from FK) 7. We check if we are close enough to our target: â€¢ If yes: stop â€¢ If not: repeat 3-7. âˆ†ğ’™ğ’™ ğ’’ğ’’ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘¡ğ‘¡ğ‘’ğ‘’ğ‘ ğ‘ ? ? ? What happens if, in step 5, the step size is not small enough? 17 What if the Jacobian is NOT square? What do we do with robots whose Jacobians are not square, e.g. redundant robots? â€¢ Jacobian Transpose: Ì‡ğ’’ğ’’ = ğ›¼ğ›¼ğ‘±ğ‘± ğ‘‡ğ‘‡ Ì‡ğ’™ğ’™ (for some small ğ›¼ğ›¼ > 0) ï‚§ This can behave â€close enoughâ€ to the inverse assuming a small enough ğ›¼ğ›¼. â€¢ Jacobian (Moore-Penrose) Pseudoinverse: Ì‡ğ’’ğ’’ = ğ‘±ğ‘± â€  Ì‡ğ’™ğ’™ (where â€  is the pseudoinverse) ï‚§ This is a generalization of the concept of inverse for non-square matrices. â€¦which, in MATLAB, can be calculated using pinv(): https://se.mathworks.com/help/matlab/ref/pinv.html?s_tid=doc_ta Part II: Trajectory Generation (for Linear Paths) 19 Offline vs. Online Robot Trajectory Control Internally, a robot has a control computer that is updating the robot parameters and sending commands to the motors at a fixed updated rate/control cycle. There are typically two ways for a user to control a robot: â€¢ Online control: Commands are sent to the robot at its update rate/control frequency. ï‚§ Example: UR e-series robots run at 500 Hz, so a new target point would have to be sent to the robot every 2 ms. ï‚§ This means that a path has to be discretized/sampled to fit the robotâ€™s control cycle. â€¢ Offline control: Specify a start and end point, a type of motion, and constraints on time/velocity. ï‚§ Example: Move in a straight line in Cartesian space from ğ‘ƒğ‘ƒğ‘ƒ= 0.3, âˆ’0.2, 0.4, ğœ‹ğœ‹ 2 , 0,0 to ğ‘ƒğ‘ƒ2= 0.5, 0.1, 0.2, ğœ‹ğœ‹ 2 , 0,0 ï‚§ The robot internally figures out how to translate this into an online control problem. 20 Offline vs. Online Robot Trajectory Control â€Linear Cartesian Moveâ€ or â€Linear Joint Moveâ€ Offline Control Online Control Desired Path Robot Control Computer (updates at certain control frequency) Move Type: Parameters: Target Point Start Point Speed Time Discretized Path: Send commands continuously Send command once 21 Getting from A to B: Multiple Paths This path is not linear. We are not considering this right now This is a linear path. This is what we are discussing. Linear paths will always take the shortest distance in that particular space. 22 Movement in Joint or Cartesian Space We can define trajectories for a robot in either Joint or Cartesian space. â€¢ Joint space has the advantage that we do not have to consider singularities. â€¢ Cartesian space has the advantage that it is easier to relate to the task and to how we think. Linear Movements: Cartesian â‰  Joint Space! Linear movement in Cartesian space ïƒ  curved movement in Joint Space! Let us see it on the robotâ€¦ 23 Getting from A to B: Multiple Velocity Profiles This is what we will be discussing. All of these paths reach the target point at the same time: â€¦but they do so with different velocity profiles. 24 Different Velocity Profiles Source: Yoon et al. â€œTrapezoidal Motion Profile to Suppress Residual Vibration of Flexible Object Moved by Robotâ€, Electronics, MDPI, 2019, https://www.mdpi.com/2079-9292/8/1/30/htm 25 Trapezoidal Velocity Profiles Source: Yoon et al. â€œTrapezoidal Motion Profile to Suppress Residual Vibration of Flexible Object Moved by Robotâ€, Electronics, MDPI, 2019, https://www.mdpi.com/2079-9292/8/1/30/htm Specify either: â€¢ Max. velocity and acceleration: ğ‘¡ğ‘¡ğ‘ ğ‘  = ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ â€¢ Max. velocity and time: ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ = ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ ğ‘¡ğ‘¡ğ‘ ğ‘  â€¢ Max. acceleration and time: ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ = ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ğ‘¡ğ‘¡ğ‘ ğ‘  Then calculate: ğ‘¡ğ‘¡ğ‘“ğ‘“ = âˆ†ğ‘¥ğ‘¥ ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ + ğ‘¡ğ‘¡ğ‘ ğ‘  ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  = ğ‘¡ğ‘¡ğ‘“ğ‘“ âˆ’ 2ğ‘¡ğ‘¡ğ‘ ğ‘  26 Exercise (10 min.) Given: ğ‘ğ‘ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ , ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥, ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥, ğ‘¡ğ‘¡ğ‘ ğ‘ , ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  1. Write an equation to calculate the velocity at any given time, ğ‘¡ğ‘¡ for a trapezoidal velocity profile. 2. Do the same for position. (Hint: They should be piecewise equations) ğ‘£ğ‘£ ğ‘¡ğ‘¡ = ï¿½ ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ğ‘¡ğ‘¡, ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥, ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ âˆ’ ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ ğ‘¡ğ‘¡ âˆ’ ğ‘¡ğ‘¡ğ‘ ğ‘  + ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  , ğ‘¡ğ‘¡ < ğ‘¡ğ‘¡ğ‘ ğ‘  ğ‘¡ğ‘¡ğ‘ ğ‘  â‰¤ğ‘¡ğ‘¡ < ğ‘¡ğ‘¡ğ‘ ğ‘  + ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  ğ‘¡ğ‘¡ â‰¥ğ‘¡ğ‘¡ğ‘ ğ‘  + ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  ğ‘ğ‘ ğ‘¡ğ‘¡ = 1 2 ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ğ‘¡ğ‘¡2, 1 2 ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ğ‘¡ğ‘¡ğ‘ ğ‘ 2+ ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ ğ‘¡ğ‘¡ âˆ’ ğ‘¡ğ‘¡ğ‘ ğ‘  , 1 2 ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ğ‘¡ğ‘¡ğ‘ ğ‘ 2+ ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ ğ‘¡ğ‘¡ âˆ’ ğ‘¡ğ‘¡ğ‘ ğ‘  âˆ’ ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ ğ‘¡ğ‘¡ âˆ’ ğ‘¡ğ‘¡ğ‘ ğ‘  + ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  2 , ğ‘¡ğ‘¡ < ğ‘¡ğ‘¡ğ‘ ğ‘  ğ‘¡ğ‘¡ğ‘ ğ‘  â‰¤ğ‘¡ğ‘¡ < ğ‘¡ğ‘¡ğ‘ ğ‘  + ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  ğ‘¡ğ‘¡ â‰¥ğ‘¡ğ‘¡ğ‘ ğ‘  + ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  27 1 2 ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ğ‘¡ğ‘¡ğ‘ ğ‘ 2+ ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ ğ‘¡ğ‘¡ğ‘ ğ‘  + ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  âˆ’ ğ‘¡ğ‘¡ğ‘ ğ‘  + ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ âˆ’ ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ ğ‘¡ğ‘¡ âˆ’ ğ‘¡ğ‘¡ğ‘ ğ‘  + ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  ğ‘¡ğ‘¡ âˆ’ ğ‘¡ğ‘¡ğ‘ ğ‘  + ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  ğ‘ƒ 2 ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ğ‘¡ğ‘¡ğ‘ ğ‘ 2+ ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  + ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ ğ‘¡ğ‘¡ âˆ’ ğ‘¡ğ‘¡ğ‘ ğ‘  + ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  âˆ’ ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ ğ‘¡ğ‘¡ âˆ’ ğ‘¡ğ‘¡ğ‘ ğ‘  + ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  2 ğ‘ƒ 2 ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ğ‘¡ğ‘¡ğ‘ ğ‘ 2+ ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ ğ‘¡ğ‘¡ âˆ’ ğ‘¡ğ‘¡ğ‘ ğ‘  âˆ’ ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ ğ‘¡ğ‘¡ âˆ’ ğ‘¡ğ‘¡ğ‘ ğ‘  + ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  2 Simplification of ğ‘ğ‘ ğ‘¡ğ‘¡ for ğ‘¡ğ‘¡ â‰¥ğ‘¡ğ‘¡ğ‘ ğ‘  + ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  ğ‘ƒ 2 ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ğ‘¡ğ‘¡ğ‘ ğ‘ 2+ ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  + ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ ğ‘¡ğ‘¡ âˆ’ ğ‘¡ğ‘¡ğ‘ ğ‘  âˆ’ ğ‘£ğ‘£ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  âˆ’ ğ‘ğ‘ğ‘šğ‘šğ‘ ğ‘ ğ‘¥ğ‘¥ ğ‘¡ğ‘¡ âˆ’ ğ‘¡ğ‘¡ğ‘ ğ‘  + ğ‘¡ğ‘¡ğ‘ğ‘ğ‘ğ‘ğ‘ƒğ‘ƒğ‘ ğ‘ ğ‘ ğ‘  2 28 Trapezoidal Velocity Profiles: Derivatives Jerk is the derivative of the acceleration, i.e., how fast the acceleration changes over time. Why do we care about jerk? â€¢ High jerk causes wear in gears, motors and mechanical components. â€¢ In a car accident, jerk is what causes damage to your neck from whiplash. For a trapezoidal velocity profile, jerk is (theoretically) infinite!There is a problemâ€¦ 29 Cubic Polynomial We can also specify a trajectory as a cubic polynomial: ğ‘ğ‘ ğ‘¡ğ‘¡ = ğ‘ğ‘ğ‘¡ğ‘¡3+ ğ‘ğ‘ğ‘¡ğ‘¡2+ ğ‘ğ‘ğ‘¡ğ‘¡ + ğ‘‘ğ‘‘ Ì‡ğ‘ğ‘ ğ‘¡ğ‘¡ = 3ğ‘ğ‘ğ‘¡ğ‘¡2+ 2ğ‘ğ‘ğ‘¡ğ‘¡ + ğ‘ğ‘ Ìˆğ‘ğ‘ ğ‘¡ğ‘¡ = 6ğ‘ğ‘ğ‘¡ğ‘¡ + 2ğ‘ğ‘ âƒ›ğ‘ğ‘ ğ‘¡ğ‘¡ = 6ğ‘ğ‘ This will result in smoother motion than a trapezoidal velocity profile. 30 Boundary Constraints To calculate the parameters of the cubic polynomial, we set up constraints: â€¢ On the starting point: â€¢ On the end point: Then we just solve for the parameters as a system of equations. ğ‘ğ‘ 0 = ğ‘ğ‘ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘  = ğ‘‘ğ‘‘ Ì‡ğ‘ğ‘ 0 = Ì‡ğ‘ğ‘ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘  = ğ‘ğ‘ ğ‘ğ‘ ğ‘‡ğ‘‡ = ğ‘ğ‘ğ‘’ğ‘’ğ‘ƒğ‘ƒğ‘’ğ‘’ = ğ‘ğ‘ğ‘‡ğ‘‡3+ ğ‘ğ‘ğ‘‡ğ‘‡2+ ğ‘ğ‘ğ‘‡ğ‘‡ + ğ‘‘ğ‘‘ Ì‡ğ‘ğ‘ ğ‘‡ğ‘‡ = Ì‡ğ‘ğ‘ğ‘’ğ‘’ğ‘ƒğ‘ƒğ‘’ğ‘’ = 3ğ‘ğ‘ğ‘‡ğ‘‡2+ 2ğ‘ğ‘ğ‘‡ğ‘‡ + ğ‘ğ‘ 4 equations, 4 unknowns 31 Higher Order Polynomials We can do the same for higher-order polynomials. For example, a fifth-order polynomial allows us to specify boundary constraints on the acceleration: ğ‘ğ‘ ğ‘¡ğ‘¡ = ğ‘ğ‘ğ‘¡ğ‘¡5+ ğ‘ğ‘ğ‘¡ğ‘¡4+ ğ‘ğ‘ğ‘¡ğ‘¡3+ ğ‘‘ğ‘‘ğ‘¡ğ‘¡2+ ğ‘’ğ‘’ğ‘¡ğ‘¡ + ğ‘“ğ‘“ Ì‡ğ‘ğ‘ ğ‘¡ğ‘¡ = 5ğ‘ğ‘ğ‘¡ğ‘¡4+ 4ğ‘ğ‘ğ‘¡ğ‘¡3+ 3ğ‘ğ‘ğ‘¡ğ‘¡2+ 2ğ‘‘ğ‘‘ğ‘¡ğ‘¡ + ğ‘’ğ‘’ Ìˆğ‘ğ‘ ğ‘¡ğ‘¡ = 20ğ‘ğ‘ğ‘¡ğ‘¡3+ 12ğ‘ğ‘ğ‘¡ğ‘¡2+ 6ğ‘ğ‘ğ‘¡ğ‘¡ + 2ğ‘‘ğ‘‘ ğ‘ğ‘ 0 = ğ‘ğ‘ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘  = ğ‘“ğ‘“ Ì‡ğ‘ğ‘ 0 = Ì‡ğ‘ğ‘ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘  =e Ìˆğ‘ğ‘ 0 = Ìˆğ‘ğ‘ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘ ğ‘  = 2ğ‘‘ğ‘‘ ğ‘ğ‘ ğ‘‡ğ‘‡ = ğ‘ğ‘ğ‘’ğ‘’ğ‘ƒğ‘ƒğ‘’ğ‘’ = ğ‘ğ‘ğ‘‡ğ‘‡5+ ğ‘ğ‘ğ‘‡ğ‘‡4+ ğ‘ğ‘ğ‘‡ğ‘‡3+ ğ‘‘ğ‘‘ğ‘‡ğ‘‡2+ ğ‘’ğ‘’ğ‘‡ğ‘‡ + ğ‘“ğ‘“ Ì‡ğ‘ğ‘ ğ‘‡ğ‘‡ = Ì‡ğ‘ğ‘ğ‘’ğ‘’ğ‘ƒğ‘ƒğ‘’ğ‘’ = 5ğ‘ğ‘ğ‘‡ğ‘‡4+ 4ğ‘ğ‘ğ‘‡ğ‘‡3+ 3ğ‘ğ‘ğ‘‡ğ‘‡2+ 2ğ‘‘ğ‘‘ğ‘‡ğ‘‡+ ğ‘’ğ‘’ Ìˆğ‘ğ‘ ğ‘‡ğ‘‡ = Ìˆğ‘ğ‘ğ‘’ğ‘’ğ‘ƒğ‘ƒğ‘’ğ‘’ = 20ğ‘ğ‘ğ‘‡ğ‘‡3+ 12ğ‘ğ‘ğ‘‡ğ‘‡2+ 6ğ‘ğ‘ğ‘‡ğ‘‡+ 2ğ‘‘ğ‘‘ 32 Trajectories for Multiple Joints/Dimensions The previous examples consider only one joint/Cartesian space dimension independently at a time. Generalizing to multiple dimensions is simply a matter of making all parameters vectors: ğ’’ğ’’ ğ‘¡ğ‘¡ = ğ’‚ğ’‚ğ‘¡ğ‘¡3+ ğ’ƒğ’ƒğ‘¡ğ‘¡2+ ğ’„ğ’„ğ‘¡ğ‘¡ + ğ’…ğ’… ğ‘ğ‘ğ‘ƒ ğ‘¡ğ‘¡ â‹® ğ‘ğ‘ğ‘ƒğ‘ƒ ğ‘¡ğ‘¡ = ğ‘ğ‘ğ‘ƒ â‹® ğ‘ğ‘ğ‘ƒğ‘ƒ ğ‘¡ğ‘¡3+ ğ‘ğ‘ğ‘ƒ â‹® ğ‘ğ‘ğ‘ƒğ‘ƒ ğ‘¡ğ‘¡2+ ğ‘ğ‘ â‹® ğ‘ğ‘ğ‘ƒğ‘ƒ ğ‘¡ğ‘¡ + ğ‘‘ğ‘‘ â‹® ğ‘‘ğ‘‘ğ‘ƒğ‘ƒ Question: The above is true for a complete joint-space position. Will it work for a full Cartesian-space pose (position + orientation)? Why or why not? If not, which part is it true for? Discuss (5 minutes) 33 Linear Trajectories through Multiple Points ğ‘ƒğ‘ƒğ‘ƒ ğ‘ƒğ‘ƒ2 ğ‘ƒğ‘ƒ3 ğ‘ƒğ‘ƒğ‘ƒ ğ‘ƒğ‘ƒ2 ğ‘ƒğ‘ƒ3 Continuous motion through middle pointStopping at middle point Question: with the tools so far, how do you obtain the following behavior? (Discuss with your neighbors, 5 min., then share with the class) 34 Linear Trajectories through Multiple Points Two trapezoidal velocity profiles in a row: â€¢ One from ğ‘ƒğ‘ƒğ‘ƒto ğ‘ƒğ‘ƒ2 â€¢ Another from ğ‘ƒğ‘ƒ2to ğ‘ƒğ‘ƒ3 ğ‘ƒğ‘ƒğ‘ƒ ğ‘ƒğ‘ƒ2 ğ‘ƒğ‘ƒ3 ğ‘ƒğ‘ƒğ‘ƒ ğ‘ƒğ‘ƒ2 ğ‘ƒğ‘ƒ3 Two cubic polynomials: ğ‘ğ‘ğ‘ƒ 0 = ğ‘ƒğ‘ƒğ‘ƒ Ì‡ğ‘ğ‘ğ‘ƒ 0 = 0 ğ‘ğ‘ğ‘ƒ ğ‘‡ğ‘‡ğ‘’ğ‘’ğ‘ƒğ‘ƒğ‘’ğ‘’,ğ‘ƒ = ğ‘ğ‘2 0 = ğ‘ƒğ‘ƒ2 Ì‡ğ‘ğ‘ğ‘ƒ ğ‘‡ğ‘‡ğ‘’ğ‘’ğ‘ƒğ‘ƒğ‘’ğ‘’,ğ‘ƒ = Ì‡ğ‘ğ‘2 0 = ğ‘£ğ‘£ ğ‘ğ‘ğ‘ƒ ğ‘¡ğ‘¡ = ğ‘ğ‘ğ‘ƒğ‘¡ğ‘¡3+ ğ‘ğ‘ğ‘ƒğ‘¡ğ‘¡2+ ğ‘ğ‘ğ‘ƒğ‘¡ğ‘¡ + ğ‘‘ğ‘‘ğ‘ƒ Ì‡ğ‘ğ‘ğ‘ƒ ğ‘¡ğ‘¡ = 3ğ‘ğ‘ğ‘ƒğ‘¡ğ‘¡2+ 2ğ‘ğ‘ğ‘ƒğ‘¡ğ‘¡ + ğ‘ğ‘ğ‘ƒ Ìˆğ‘ğ‘ğ‘ƒ ğ‘¡ğ‘¡ = 6ğ‘ğ‘ğ‘ƒğ‘¡ğ‘¡ + 2ğ‘ğ‘ğ‘ƒ ğ‘ğ‘2 ğ‘¡ğ‘¡ = ğ‘ğ‘2ğ‘¡ğ‘¡3+ ğ‘ğ‘2ğ‘¡ğ‘¡2+ ğ‘ğ‘2ğ‘¡ğ‘¡ + ğ‘‘ğ‘‘2 Ì‡ğ‘ğ‘2 ğ‘¡ğ‘¡ = 3ğ‘ğ‘2ğ‘¡ğ‘¡2+ 2ğ‘ğ‘2ğ‘¡ğ‘¡ + ğ‘ğ‘2 Ìˆğ‘ğ‘2 ğ‘¡ğ‘¡ = 6ğ‘ğ‘2ğ‘¡ğ‘¡ + 2ğ‘ğ‘2 ğ‘ğ‘2 ğ‘‡ğ‘‡ğ‘’ğ‘’ğ‘ƒğ‘ƒğ‘’ğ‘’,2 = ğ‘ƒğ‘ƒ3 Ì‡ğ‘ğ‘2 ğ‘‡ğ‘‡ğ‘’ğ‘’ğ‘ƒğ‘ƒğ‘’ğ‘’,2 = 0 with shared middle constraint: 35 What about Cartesian-space Orientation? The methods introduced so far assume that each dimension is independent. When describing orientation, all components are interdependent. Orientations need to be treated separately using, e.g. quaternions. This is much more complicated and beyond this course. 36 Moving in Cartesian Space: IK Solutions When moving in Cartesian space, we also need to consider the existence of multiple IK solutions. Within the same trajectory, we will usually want to pick the closest solution to the current configuration. With redundant robots (and our own arm), we can change solutions for the elbow while moving. 37 Recap: What have we discussed today â€¢ The inverse velocity kinematics equation has many important applications in robotics. â€¢ The inverse of the Jacobian cannot be calculated if the robot is in a singular configuration. ï‚§ In this case, the robot cannot move in certain directions. ï‚§ Joint velocities close to singularities will be very large. â€¢ Linear movements in Cartesian and Joint space will always follow the shortest distance (in that space!) â€¢ We can design different linear movements by changing the velocity profile: ï‚§ Trapezoidal ï‚§ Polynomial (3rd or 5th order) â€¢ When moving in Cartesian space, we must always consider the choice of IK solution. 1. Moving close to singularities (where the Jacobian cannot be inverted) results in high joint velocities, which has important practical consequences. 2. For linear motions, different velocity profiles (e.g. trapezoidal or polynomial) will result in different features and degrees of smoothness. The choice of profile will influence our ability to set boundary conditions. Take home message(s): 38 Thank you for today. IÃ±igo Iturrate inju@mmmi.sdu.dk Ã˜27-604-3","libVersion":"0.2.4","langs":""}