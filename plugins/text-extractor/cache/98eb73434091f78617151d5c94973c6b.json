{"path":"Lessons/Semester 2/Kinematik/Lecture 5 - Other Orientation Representations.pdf","text":"Lecture 5: Other Orientation Representations IÃ±igo Iturrate Assistant Professor SDU Robotics, The Maersk McKinney Moller Institute, University of Southern Denmark inju@mmmi.sdu.dk Ã˜27-604-3 4 What are we doing today? 1. CAD Modelling in Autodesk Inventor â€“ Guest Lecture by Aljaz Kramberger 2. CAD Assemblies in Autodesk Inventor â€“ Guest Lecture by Aljaz Kramberger 3. Introduction to Robotics & Recap of Linear Algebra and Mathematical Notation 4. Translations & Rotation Matrices 5. Other Representations for Orientation (Today) 6. Transformation Matrices 7. DH Parameters & Forward Kinematics 8. Analytical Forward Kinematics & Kinematic Simulation 9. Inverse Kinematics 10. Velocity Kinematics & the Jacobian Matrix 11. More about the Jacobian & Trajectory Generation 12. Manipulability, More on the Robotic Systems Toolbox 5 Topics for Today Part I: â€¢ The â€problemâ€ with orientation â€¢ â€Warm-upâ€ exercise/discussion â€¢ Overview of orientation/rotation representations Part II: â€¢ Angle-Set Conventions ï‚§ Fixed angles ï‚§ Euler angles â€¢ Gimbal Lock Part III: Equivalent angle-axis (Euler vector) Part I: What is this whole fuss about orientation? (or why we are using more than one lecture on it) 7 The Concept of Orientation How would you represent an orientation: â€¢ If we lived in a 1D world? â€¢ If we lived in a 2D world? â€¢ If we lived in a 3D world? 8 Why is Orientation Difficult? Position is all nice and easy for our brains. â€¢ We like . It is easy to relate to: Orientation is a funky concept to your brain, in terms of mathematics. â€¢ Orientation does not live in . It is related to circles and spheres and lives in (in 3D). Funny things happen: ?!?! 9 Rotation vs. Orientation â€¢ Orientation describes a state. â€¢ Rotation is an operation, i.e. it describes how to get from one orientation to another. ï¿½ğ‘¿ğ‘¿ğ‘©ğ‘© ï¿½ğ’ğ’ğ‘©ğ‘© ï¿½ğ’€ğ’€ğ‘©ğ‘© ğ‘©ğ‘© ï¿½ğ’ğ’ğ´ğ´ ï¿½ğ’€ğ’€ğ´ğ´ ï¿½ğ‘¿ğ‘¿ğ´ğ´ ğ‘¨ğ‘¨ Rotation Orientation Orientation 10 How do you get from {A} to {B}? ï¿½ğ‘¿ğ‘¿ğ‘©ğ‘© ï¿½ğ’ğ’ğ‘©ğ‘© ï¿½ğ’€ğ’€ğ‘©ğ‘© ğ‘©ğ‘© ï¿½ğ’ğ’ğ´ğ´ ï¿½ğ’€ğ’€ğ´ğ´ ï¿½ğ‘¿ğ‘¿ğ´ğ´ ğ‘¨ğ‘¨ ??? Splitting the 3D problem into a sequence of rotations is one solution*: â€¢ You may think this is easyâ€¦ â€¢ â€¦so why did I say orientation is difficult? â€¢ Well, this solution carries other problems, as we will see. *Note: Called Euler angles. 11 (Subjective) Overview of Orientation Representations Angles-set Conventions Quaternions* Rotation Matrices Equivalent Angle-Axis Intuitive (for visualization) Useful (for calculation) *Quaternions are wonderful and extremely powerful. Also, they live in a 4-dimensional space and will therefore make your brain explode if you think too much about them. This is probably the most subjective part 12 Orientation/Rotation Representations: Use-Cases Fixed angles ğ›¼ğ›¼, ğ›½ğ›½, ğ›¾ğ›¾ Rotation matrix ğ‘Ÿğ‘Ÿ11 ğ‘Ÿğ‘Ÿ12 ğ‘Ÿğ‘Ÿ13 ğ‘Ÿğ‘Ÿ21 ğ‘Ÿğ‘Ÿ22 ğ‘Ÿğ‘Ÿ23 ğ‘Ÿğ‘Ÿ31 ğ‘Ÿğ‘Ÿ32 ğ‘Ÿğ‘Ÿ33 Euler angles ğ›¼ğ›¼, ğ›½ğ›½, ğ›¾ğ›¾ Angle-axis ğœƒğœƒ, ğ‘˜ğ‘˜ğ‘¥ğ‘¥, ğ‘˜ğ‘˜ğ‘¦ğ‘¦, ğ‘˜ğ‘˜ğ‘§ğ‘§ Quaternions ğœ–ğœ–1, ğœ–ğœ–2, ğœ–ğœ–3, ğœ–ğœ–4 (Chap. 2, pp. 50) Visualization Parts based on Kinematics Lecture Slides by Christian Schlette, Professor, SDU Robotics Calculations Calculations/ Animations Calculations/ Animations Part II: Angle-Set Conventions 14 Angle-Set Conventions Angle-set conventions represent orientation as three separate rotations around different axes. â€¢ For fixed angles, the coordinate system stays fixed/still. â€¢ For Euler angles, the coordinate system rotates. The rotations can be applied in many orders. Fixed Angles Roll (ğ›¾ğ›¾) Pitch (ğ›½ğ›½) Yaw (ğ›¼ğ›¼) Euler Angles Roll Pitch Yaw 15 All 24 Angle-Set Conventions 12 Euler angles sets ğ‘¹ğ‘¹ğ‘‹ğ‘‹â€²ğ‘Œğ‘Œâ€²ğ‘ğ‘â€² ğ‘¹ğ‘¹ğ‘‹ğ‘‹â€²ğ‘ğ‘â€²ğ‘Œğ‘Œâ€² ğ‘¹ğ‘¹ğ‘Œğ‘Œâ€²ğ‘‹ğ‘‹â€²ğ‘ğ‘â€² ğ‘¹ğ‘¹ğ‘Œğ‘Œâ€²ğ‘ğ‘â€²ğ‘‹ğ‘‹â€² ğ‘¹ğ‘¹ğ‘ğ‘â€²ğ‘‹ğ‘‹â€²ğ‘Œğ‘Œâ€² ğ‘¹ğ‘¹ğ‘ğ‘â€²ğ‘Œğ‘Œâ€²ğ‘‹ğ‘‹â€² ğ‘¹ğ‘¹ğ‘‹ğ‘‹â€²ğ‘Œğ‘Œâ€²ğ‘‹ğ‘‹â€² ğ‘¹ğ‘¹ğ‘‹ğ‘‹â€²ğ‘ğ‘â€²ğ‘‹ğ‘‹â€² ğ‘¹ğ‘¹ğ‘Œğ‘Œâ€²ğ‘‹ğ‘‹â€²ğ‘Œğ‘Œâ€² ğ‘¹ğ‘¹ğ‘Œğ‘Œâ€²ğ‘ğ‘â€²ğ‘Œğ‘Œâ€² ğ‘¹ğ‘¹ğ‘ğ‘â€²ğ‘‹ğ‘‹â€²ğ‘ğ‘â€² ğ‘¹ğ‘¹ğ‘ğ‘â€²ğ‘Œğ‘Œâ€²ğ‘ğ‘â€² 12 Fixed angle sets ğ‘¹ğ‘¹ğ‘‹ğ‘‹ğ‘Œğ‘Œğ‘ğ‘ ğ‘¹ğ‘¹ğ‘‹ğ‘‹ğ‘ğ‘ğ‘Œğ‘Œ ğ‘¹ğ‘¹ğ‘Œğ‘Œğ‘‹ğ‘‹ğ‘ğ‘ ğ‘¹ğ‘¹ğ‘Œğ‘Œğ‘ğ‘ğ‘‹ğ‘‹ ğ‘¹ğ‘¹ğ‘ğ‘ğ‘‹ğ‘‹ğ‘Œğ‘Œ ğ‘¹ğ‘¹ğ‘ğ‘ğ‘Œğ‘Œğ‘‹ğ‘‹ ğ‘¹ğ‘¹ğ‘‹ğ‘‹ğ‘Œğ‘Œğ‘‹ğ‘‹ ğ‘¹ğ‘¹ğ‘‹ğ‘‹ğ‘ğ‘ğ‘‹ğ‘‹ ğ‘¹ğ‘¹ğ‘Œğ‘Œğ‘‹ğ‘‹ğ‘Œğ‘Œ ğ‘¹ğ‘¹ğ‘Œğ‘Œğ‘ğ‘ğ‘Œğ‘Œ ğ‘¹ğ‘¹ğ‘ğ‘ğ‘‹ğ‘‹ğ‘ğ‘ ğ‘¹ğ‘¹ğ‘Œğ‘Œğ‘ğ‘ğ‘Œğ‘Œ Based on Kinematics Lecture Slides by Christian Schlette, Professor, SDU Robotics 16 Euler Angles Z-Y-X Euler angles: Each rotation is performed about an axis of the coordinate system from the last step. 1. Start with a known frame {ğ‘¨ğ‘¨}. Rotate first about ï¿½ğ’ğ’ğ´ğ´ by angle ğ›¼ğ›¼. 2. Then, rotate about the resulting ï¿½ğ’€ğ’€ğµğµ â€² by angle ğ›½ğ›½. 3. Finally, rotate about the resulting ï¿½ğ‘¿ğ‘¿ğµğµ â€²â€² by angle ğ›¾ğ›¾. ï¿½ğ’€ğ’€ğµğµ â€²â€² ğ›¾ğ›¾ ï¿½ğ‘¿ğ‘¿ğµğµ â€²â€²= ï¿½ğ‘¿ğ‘¿ğµğµ â€²â€²â€² ï¿½ğ’€ğ’€ğµğµ â€²â€²â€² ï¿½ğ’ğ’ğµğµ â€²â€² ï¿½ğ’ğ’ğµğµ â€²â€²â€² ï¿½ğ’ğ’ğµğµ â€² ï¿½ğ’€ğ’€ğµğµ â€² = ï¿½ğ’€ğ’€ğµğµ â€²â€² ğ›½ğ›½ ï¿½ğ’ğ’ğµğµ â€²â€² ï¿½ğ‘¿ğ‘¿ğµğµ â€² ï¿½ğ‘¿ğ‘¿ğµğµ â€²â€² ï¿½ğ’ğ’ğ´ğ´ = ï¿½ğ’ğ’ğµğµ â€² ï¿½ğ’€ğ’€ğ´ğ´ ï¿½ğ‘¿ğ‘¿ğ´ğ´ ï¿½ğ’€ğ’€ğµğµ â€² Î± ï¿½ğ‘¿ğ‘¿ğµğµ â€² Parts based on Kinematics Lecture Slides by Christian Schlette, Professor, SDU Robotics 17 Euler Angles Z-Y-X to Rotation Matrix ğµğµ ğ´ğ´ğ‘¹ğ‘¹ğ‘ğ‘â€²ğ‘Œğ‘Œâ€²ğ‘‹ğ‘‹â€² ğ›¼ğ›¼, ğ›½ğ›½, ğ›¾ğ›¾ = ğ‘¹ğ‘¹ğ‘ğ‘ ğ›¼ğ›¼ ğ‘¹ğ‘¹ğ‘Œğ‘Œ ğ›½ğ›½ ğ‘¹ğ‘¹ğ‘‹ğ‘‹ ğ›¾ğ›¾ = ğ‘ğ‘ğ›¼ğ›¼ âˆ’ğ‘ ğ‘ ğ›¼ğ›¼ 0 ğ‘ ğ‘ ğ›¼ğ›¼ ğ‘ğ‘ğ›¼ğ›¼ 0 0 0 1 ğ‘ğ‘ğ›½ğ›½ 0 ğ‘ ğ‘ ğ›½ğ›½ 0 1 0 âˆ’ğ‘ ğ‘ ğ›½ğ›½ 0 ğ‘ğ‘ğ›½ğ›½ 1 0 0 0 ğ‘ğ‘ğ›¾ğ›¾ âˆ’ğ‘ ğ‘ ğ›¾ğ›¾ 0 ğ‘ ğ‘ ğ›¾ğ›¾ ğ‘ğ‘ğ›¾ğ›¾ = ğ‘ğ‘ğ›¼ğ›¼ğ‘ğ‘ğ›½ğ›½ ğ‘ğ‘ğ›¼ğ›¼ğ‘ ğ‘ ğ›½ğ›½ğ‘ ğ‘ ğ›¾ğ›¾ âˆ’ ğ‘ ğ‘ ğ›¼ğ›¼ğ‘ğ‘ğ›¾ğ›¾ ğ‘ğ‘ğ›¼ğ›¼ğ‘ ğ‘ ğ›½ğ›½ğ‘ğ‘ğ›¾ğ›¾ + ğ‘ ğ‘ ğ›¼ğ›¼ğ‘ ğ‘ ğ›¾ğ›¾ ğ‘ ğ‘ ğ›¼ğ›¼ğ‘ğ‘ğ›½ğ›½ ğ‘ ğ‘ ğ›¼ğ›¼ğ‘ ğ‘ ğ›½ğ›½ğ‘ ğ‘ ğ›¾ğ›¾ + ğ‘ğ‘ğ›¼ğ›¼ğ‘ğ‘ğ›¾ğ›¾ ğ‘ ğ‘ ğ›¼ğ›¼ğ‘ ğ‘ ğ›½ğ›½ğ‘ğ‘ğ›¾ğ›¾ âˆ’ ğ‘ğ‘ğ›¼ğ›¼ğ‘ ğ‘ ğ›¾ğ›¾ âˆ’ğ‘ ğ‘ ğ›½ğ›½ ğ‘ğ‘ğ›½ğ›½ğ‘ ğ‘ ğ›¾ğ›¾ ğ‘ğ‘ğ›½ğ›½ğ‘ğ‘ğ›¾ğ›¾ ï¿½ğ‘¿ğ‘¿ğ‘©ğ‘© ï¿½ğ’ğ’ğ‘©ğ‘© ï¿½ğ’€ğ’€ğ‘©ğ‘© ğ‘©ğ‘© ï¿½ğ’ğ’ğ´ğ´ ï¿½ğ’€ğ’€ğ´ğ´ ï¿½ğ‘¿ğ‘¿ğ´ğ´ ğ‘¨ğ‘¨ ğ‘ğ‘ = 90Â° ğ‘Œğ‘Œ = 90Â° ğ‘‹ğ‘‹ = 90Â° You have already done this! Just right-multiply three rotation matrices around each axis in order: ğ‘ğ‘ğ›¼ğ›¼ = cos ğ›¼ğ›¼ , ğ‘ ğ‘ ğ›¼ğ›¼ = sin ğ›¼ğ›¼ Stack from left to right (i.e. multiply each new rotation on the right) 18 Fixed Angles X-Y-Z (Roll-Pitch-Yaw) Fixed angles: Each rotation is performed about an axis of the same fixed reference coordinate system. ï¿½ğ’ğ’ğ´ğ´ ï¿½ğ’€ğ’€ğ´ğ´ ï¿½ğ‘¿ğ‘¿ğ´ğ´ ï¿½ğ‘¿ğ‘¿ğµğµ â€²â€²â€² ï¿½ğ’€ğ’€ğµğµ â€²â€²â€² ğ›¼ğ›¼ ï¿½ğ’ğ’ğµğµ â€²â€²â€² ï¿½ğ’ğ’ğ´ğ´ ï¿½ğ’€ğ’€ğ´ğ´ ï¿½ğ‘¿ğ‘¿ğ´ğ´ ï¿½ğ‘¿ğ‘¿ğµğµ â€²â€² ï¿½ğ’€ğ’€ğµğµ â€²â€² ğ›½ğ›½ ï¿½ğ’ğ’ğµğµ â€²â€²ï¿½ğ’ğ’ğ´ğ´ ï¿½ğ’€ğ’€ğ´ğ´ ï¿½ğ‘¿ğ‘¿ğ´ğ´ = ï¿½ğ‘¿ğ‘¿ğµğµ â€² ï¿½ğ’ğ’ğµğµ â€² ï¿½ğ’€ğ’€ğµğµ â€² ğ›¾ğ›¾ 1. Start with a known frame {ğ‘¨ğ‘¨}. Rotate first about ï¿½ğ‘¿ğ‘¿ğ´ğ´ by angle ğ›¾ğ›¾. 2. Then, rotate about the ï¿½ğ’€ğ’€ğ´ğ´ by angle ğ›½ğ›½. 3. Finally, rotate about the ï¿½ğ’ğ’ğ´ğ´ by angle ğ›¼ğ›¼. Parts based on Kinematics Lecture Slides by Christian Schlette, Professor, SDU Robotics 19 Fixed Angles X-Y-Z to Rotation Matrix ğµğµ ğ´ğ´ğ‘¹ğ‘¹ğ‘‹ğ‘‹ğ‘Œğ‘Œğ‘ğ‘ ğ›¾ğ›¾, ğ›½ğ›½, ğ›¼ğ›¼ = ğ‘¹ğ‘¹ğ‘ğ‘ ğ›¼ğ›¼ ğ‘¹ğ‘¹ğ‘Œğ‘Œ ğ›½ğ›½ ğ‘¹ğ‘¹ğ‘‹ğ‘‹ ğ›¾ğ›¾ = ??? Opposite of Euler angles: left-multiply three rotation matrices around each axis in order: Stack from right to left (i.e. multiply each new rotation on the left) 20 Using combinations of your three functions rotx(), roty(), rotz(): 1. Calculate: a) The rotation matrix for the Euler Angles Z-Y-X, for ğ›¼ğ›¼ = 35Â°, ğ›½ğ›½ = 70Â°, ğ›¾ğ›¾ = 20Â°. b) The rotation matrix for the Fixed Angles X-Y-Z (RPY), for ğ›¾ğ›¾ = 20Â°, ğ›½ğ›½ = 70Â°, ğ›¼ğ›¼ = 35Â°. 2. Calculate: a) The rotation matrix for the Euler Angles Z-Y-Z, for ğ›¼ğ›¼ = 80Â°, ğ›½ğ›½ = 125Â°, ğ›¾ğ›¾ = âˆ’70Â°. b) The rotation matrix for the Fixed Angles Z-Y-Z, for ğ›¾ğ›¾ = âˆ’70Â°, ğ›½ğ›½ = 125Â°, ğ›¼ğ›¼ = 80Â°. In MATLAB, try the following: Notice anything interesting? 21 Relation between Fixed and Euler Angles Fixed angles for a certain order are equal to Euler angles with the opposite order! ğµğµ ğ´ğ´ğ‘¹ğ‘¹ğ‘‹ğ‘‹ğ‘Œğ‘Œğ‘ğ‘ ğ›¾ğ›¾, ğ›½ğ›½, ğ›¼ğ›¼ = ğµğµ ğ´ğ´ğ‘¹ğ‘¹ğ‘ğ‘â€²ğ‘Œğ‘Œâ€²ğ‘‹ğ‘‹â€² ğ›¼ğ›¼, ğ›½ğ›½, ğ›¾ğ›¾ ğµğµ ğ´ğ´ğ‘¹ğ‘¹ğ‘Œğ‘Œğ‘ğ‘ğ‘‹ğ‘‹ ğ›¾ğ›¾, ğ›½ğ›½, ğ›¼ğ›¼ = ğµğµ ğ´ğ´ğ‘¹ğ‘¹ğ‘‹ğ‘‹â€²ğ‘ğ‘â€²ğ‘Œğ‘Œâ€² ğ›¼ğ›¼, ğ›½ğ›½, ğ›¾ğ›¾ ğµğµ ğ´ğ´ğ‘¹ğ‘¹ğ‘ğ‘ğ‘‹ğ‘‹ğ‘Œğ‘Œ ğ›¾ğ›¾, ğ›½ğ›½, ğ›¼ğ›¼ = ğµğµ ğ´ğ´ğ‘¹ğ‘¹ğ‘Œğ‘Œâ€²ğ‘‹ğ‘‹â€²ğ‘ğ‘â€² ğ›¼ğ›¼, ğ›½ğ›½, ğ›¾ğ›¾ etc. What is happening? How can we interpret the two approaches geometrically? 22 Local vs. Global Coordinate Frames (and Pre/Post-multiplication) Fixed Angles Euler Angles â€¢ Global coordinate frame, does not move â€¢ Left-multiplied â€¢ For a robot: the base is a fixed frame â€¢ Local coordinate frame, moves â€¢ Right-multiplied â€¢ For a robot, the tool is a moving frame It comes down to: are we moving or fixing the reference frame? 23 An Issue with Angle-Sets: Gimbal Lock (Example) 24 Gimbal Lock 25 Gimbal Lock: When does it happen? Gimbal lock can happen for two different reasons: â€¢ Mathematically: in representations that map 3D orientation to sets of three angles (i.e. angle-sets). â€¢ Physically: ï‚§ In mechanisms that decouple orientation into several angles. (e.g. the airplane gunner example). ï‚§ In measurement systems that decouple quantities related to orientation into several angles. (e.g. Inertial Measurement units ïƒ  see Apollo 11) 26 Rotation Matrix to Fixed Angles X-Y-Z (I) ğ›½ğ›½ = atan2 âˆ’ğ‘Ÿğ‘Ÿ31, ğ‘Ÿğ‘Ÿ11 2 + ğ‘Ÿğ‘Ÿ21 2 cos ğ›½ğ›½ = ğ‘Ÿğ‘Ÿ11 2+ ğ‘Ÿğ‘Ÿ21 2, sin ğ›½ğ›½ = âˆ’ğ‘Ÿğ‘Ÿ31 ğµğµ ğ´ğ´ğ‘¹ğ‘¹ğ‘ğ‘â€²ğ‘Œğ‘Œâ€²ğ‘‹ğ‘‹â€² ğ›¼ğ›¼, ğ›½ğ›½, ğ›¾ğ›¾ = ğµğµ ğ´ğ´ğ‘¹ğ‘¹ğ‘‹ğ‘‹ğ‘Œğ‘Œğ‘ğ‘ ğ›¾ğ›¾, ğ›½ğ›½, ğ›¼ğ›¼ = ğ‘ğ‘ğ›¼ğ›¼ğ‘ğ‘ğ›½ğ›½ ğ‘ğ‘ğ›¼ğ›¼ğ‘ ğ‘ ğ›½ğ›½ğ‘ ğ‘ ğ›¾ğ›¾ âˆ’ ğ‘ ğ‘ ğ›¼ğ›¼ğ‘ğ‘ğ›¾ğ›¾ ğ‘ğ‘ğ›¼ğ›¼ğ‘ ğ‘ ğ›½ğ›½ğ‘ğ‘ğ›¾ğ›¾ + ğ‘ ğ‘ ğ›¼ğ›¼ğ‘ ğ‘ ğ›¾ğ›¾ ğ‘ ğ‘ ğ›¼ğ›¼ğ‘ğ‘ğ›½ğ›½ ğ‘ ğ‘ ğ›¼ğ›¼ğ‘ ğ‘ ğ›½ğ›½ğ‘ ğ‘ ğ›¾ğ›¾ + ğ‘ğ‘ğ›¼ğ›¼ğ‘ğ‘ğ›¾ğ›¾ ğ‘ ğ‘ ğ›¼ğ›¼ğ‘ ğ‘ ğ›½ğ›½ğ‘ğ‘ğ›¾ğ›¾ âˆ’ ğ‘ğ‘ğ›¼ğ›¼ğ‘ ğ‘ ğ›¾ğ›¾ âˆ’ğ‘ ğ‘ ğ›½ğ›½ ğ‘ğ‘ğ›½ğ›½ğ‘ ğ‘ ğ›¾ğ›¾ ğ‘ğ‘ğ›½ğ›½ğ‘ğ‘ğ›¾ğ›¾ = ğ‘Ÿğ‘Ÿ11 ğ‘Ÿğ‘Ÿ12 ğ‘Ÿğ‘Ÿ13 ğ‘Ÿğ‘Ÿ21 ğ‘Ÿğ‘Ÿ22 ğ‘Ÿğ‘Ÿ23 ğ‘Ÿğ‘Ÿ31 ğ‘Ÿğ‘Ÿ32 ğ‘Ÿğ‘Ÿ33 (cos ğ›¼ğ›¼ cos ğ›½ğ›½)2+(sin ğ›¼ğ›¼ cos ğ›½ğ›½)2= cos ğ›½ğ›½ 2 (cos ğ›¼ğ›¼)2+(sin ğ›¼ğ›¼)2 = cos ğ›½ğ›½ âŸ¶ tan ğ›½ğ›½ = sin ğ›½ğ›½ cos ğ›½ğ›½ âŸ¶ ğ›½ğ›½ = atan âˆ’ğ‘Ÿğ‘Ÿ31 ğ‘Ÿğ‘Ÿ11 2+ ğ‘Ÿğ‘Ÿ21 2 atan2 is a better version of atan that takes into account the full circle. 27 atan vs atan2 ğšğšğ­ğ­ğšğšğ­ğ­ğ­ğ­ ğ’šğ’š, ğ’™ğ’™ğšğšğ­ğ­ğšğšğ­ğ­ ğ’šğ’š ğ’™ğ’™ Returns angles between ğœ‹ğœ‹ 2 and âˆ’ ğœ‹ğœ‹ 2 . Returns angles in the full circle (0 to 2ğœ‹ğœ‹). 28 Rotation Matrix to Fixed Angles X-Y-Z (II) ğ‘Ÿğ‘Ÿ21= sin ğ›¼ğ›¼ cos ğ›½ğ›½ âŸ¶ sin ğ›¼ğ›¼ = ğ‘Ÿğ‘Ÿ21 cos ğ›½ğ›½ ğ‘Ÿğ‘Ÿ11= cos ğ›¼ğ›¼ cos ğ›½ğ›½ âŸ¶ cos ğ›¼ğ›¼ = ğ‘Ÿğ‘Ÿ11 cos ğ›½ğ›½ ğµğµ ğ´ğ´ğ‘¹ğ‘¹ğ‘ğ‘â€²ğ‘Œğ‘Œâ€²ğ‘‹ğ‘‹â€² ğ›¼ğ›¼, ğ›½ğ›½, ğ›¾ğ›¾ = ğµğµ ğ´ğ´ğ‘¹ğ‘¹ğ‘‹ğ‘‹ğ‘Œğ‘Œğ‘ğ‘ ğ›¾ğ›¾, ğ›½ğ›½, ğ›¼ğ›¼ = ğ‘ğ‘ğ›¼ğ›¼ğ‘ğ‘ğ›½ğ›½ ğ‘ğ‘ğ›¼ğ›¼ğ‘ ğ‘ ğ›½ğ›½ğ‘ ğ‘ ğ›¾ğ›¾ âˆ’ ğ‘ ğ‘ ğ›¼ğ›¼ğ‘ğ‘ğ›¾ğ›¾ ğ‘ğ‘ğ›¼ğ›¼ğ‘ ğ‘ ğ›½ğ›½ğ‘ğ‘ğ›¾ğ›¾ + ğ‘ ğ‘ ğ›¼ğ›¼ğ‘ ğ‘ ğ›¾ğ›¾ ğ‘ ğ‘ ğ›¼ğ›¼ğ‘ğ‘ğ›½ğ›½ ğ‘ ğ‘ ğ›¼ğ›¼ğ‘ ğ‘ ğ›½ğ›½ğ‘ ğ‘ ğ›¾ğ›¾ + ğ‘ğ‘ğ›¼ğ›¼ğ‘ğ‘ğ›¾ğ›¾ ğ‘ ğ‘ ğ›¼ğ›¼ğ‘ ğ‘ ğ›½ğ›½ğ‘ğ‘ğ›¾ğ›¾ âˆ’ ğ‘ğ‘ğ›¼ğ›¼ğ‘ ğ‘ ğ›¾ğ›¾ âˆ’ğ‘ ğ‘ ğ›½ğ›½ ğ‘ğ‘ğ›½ğ›½ğ‘ ğ‘ ğ›¾ğ›¾ ğ‘ğ‘ğ›½ğ›½ğ‘ğ‘ğ›¾ğ›¾ = ğ‘Ÿğ‘Ÿ11 ğ‘Ÿğ‘Ÿ12 ğ‘Ÿğ‘Ÿ13 ğ‘Ÿğ‘Ÿ21 ğ‘Ÿğ‘Ÿ22 ğ‘Ÿğ‘Ÿ23 ğ‘Ÿğ‘Ÿ31 ğ‘Ÿğ‘Ÿ32 ğ‘Ÿğ‘Ÿ33 ğ›¼ğ›¼ = ğ‘ğ‘ğ‘¡ğ‘¡ğ‘ğ‘ğ‘¡ğ‘¡ğ‘¡ ğ‘Ÿğ‘Ÿ21 cos ğ›½ğ›½ , ğ‘Ÿğ‘Ÿ11 cos ğ›½ğ›½ ğ›¾ğ›¾ = ğ‘ğ‘ğ‘¡ğ‘¡ğ‘ğ‘ğ‘¡ğ‘¡ğ‘¡ ğ‘Ÿğ‘Ÿ32 cos ğ›½ğ›½ , ğ‘Ÿğ‘Ÿ33 cos ğ›½ğ›½ ğ‘Ÿğ‘Ÿ32= cos ğ›½ğ›½ sin ğ›¾ğ›¾ âŸ¶ sin ğ›¾ğ›¾ = ğ‘Ÿğ‘Ÿ32 cos ğ›½ğ›½ ğ‘Ÿğ‘Ÿ33= cos ğ›½ğ›½ cos ğ›¾ğ›¾ âŸ¶ cos ğ›¾ğ›¾ = ğ‘Ÿğ‘Ÿ33 cos ğ›½ğ›½ 29 Rotation Matrix to Other Angle-Sets We have seen how to convert a rotation matrix to fixed angle X-Y-Z. How do we do it for other kinds of angle sets? â€¢ We can use Fixed angle to Euler angle equivalences. ï‚§ e.g. Fixed angle X-Y-Z = Euler angle Z-Y-X â€¢ We can use similar logic to the previous slides for other angle combinations: 1. Isolate sine and cosine for one angle. 2. Use atan2 to compute the angle. 3. Repeat for other angles. Part III: Equivalent Angle-Axis 31 Equivalent Angle-Axis (Euler Vector) Combination of: â€¢ Axis: unit vector that represents the direction around which we rotate. â€¢ Angle: scalar that represents how much we rotate, using the right-hand rule. Can be given as: ğœƒğœƒ, ï¿½ğ‘²ğ‘² = ğ‘˜ğ‘˜ğ‘¥ğ‘¥ ğ‘˜ğ‘˜ğ‘¦ğ‘¦ ğ‘˜ğ‘˜ğ‘§ğ‘§ or ğ‘²ğ‘² = ğœƒğœƒ ï¿½ğ‘²ğ‘² = ğœƒğœƒğ‘˜ğ‘˜ğ‘¥ğ‘¥ ğœƒğœƒğ‘˜ğ‘˜ğ‘¦ğ‘¦ ğœƒğœƒğ‘˜ğ‘˜ğ‘§ğ‘§ ï¿½ğ’ğ’ğ´ğ´ ï¿½ğ’€ğ’€ğ´ğ´ ï¿½ğ‘¿ğ‘¿ğ´ğ´ ï¿½ğ‘¿ğ‘¿ğµğµ ï¿½ğ’€ğ’€ğµğµ ğœƒğœƒ ï¿½ğ’ğ’ğµğµ ğ‘¨ğ‘¨ ğ‘©ğ‘© ğ´ğ´ ï¿½ğ‘²ğ‘² separate combined* *Universal Robots uses this representation in their Graphical User Interface 32 Equivalent Angle-Axis to Rotation Matrix When we defined ğ‘¹ğ‘¹ğ‘‹ğ‘‹ ğœƒğœƒ , ğ‘¹ğ‘¹ğ‘Œğ‘Œ ğœƒğœƒ , ğ‘¹ğ‘¹ğ‘ğ‘ ğœƒğœƒ in Lecture 4, we were already doing this. We can do this for any arbitrary angle: ğµğµ ğ´ğ´ğ‘¹ğ‘¹ğ¾ğ¾ ğœƒğœƒ = ğ‘˜ğ‘˜ğ‘¥ğ‘¥ğ‘˜ğ‘˜ğ‘¥ğ‘¥ğ‘£ğ‘£ğœƒğœƒ + ğ‘ğ‘ğœƒğœƒ ğ‘˜ğ‘˜ğ‘¥ğ‘¥ğ‘˜ğ‘˜ğ‘¦ğ‘¦ğ‘£ğ‘£ğœƒğœƒ âˆ’ ğ‘˜ğ‘˜ğ‘§ğ‘§ğ‘ ğ‘ ğœƒğœƒ ğ‘˜ğ‘˜ğ‘¥ğ‘¥ğ‘˜ğ‘˜ğ‘§ğ‘§ğ‘£ğ‘£ğœƒğœƒ + ğ‘˜ğ‘˜ğ‘¦ğ‘¦ğ‘ ğ‘ ğœƒğœƒ ğ‘˜ğ‘˜ğ‘¥ğ‘¥ğ‘˜ğ‘˜ğ‘¦ğ‘¦ğ‘£ğ‘£ğœƒğœƒ + ğ‘˜ğ‘˜ğ‘§ğ‘§ğ‘ ğ‘ ğœƒğœƒ ğ‘˜ğ‘˜ğ‘¦ğ‘¦ğ‘˜ğ‘˜ğ‘¦ğ‘¦ğ‘£ğ‘£ğœƒğœƒ + ğ‘ğ‘ğœƒğœƒ ğ‘˜ğ‘˜ğ‘¦ğ‘¦ğ‘˜ğ‘˜ğ‘§ğ‘§ğ‘£ğ‘£ğœƒğœƒ âˆ’ ğ‘˜ğ‘˜ğ‘¥ğ‘¥ğ‘ ğ‘ ğœƒğœƒ ğ‘˜ğ‘˜ğ‘¥ğ‘¥ğ‘˜ğ‘˜ğ‘§ğ‘§ğ‘£ğ‘£ğœƒğœƒ âˆ’ ğ‘˜ğ‘˜ğ‘¦ğ‘¦ğ‘ ğ‘ ğœƒğœƒ ğ‘˜ğ‘˜ğ‘¦ğ‘¦ğ‘˜ğ‘˜ğ‘§ğ‘§ğ‘£ğ‘£ğœƒğœƒ + ğ‘˜ğ‘˜ğ‘¥ğ‘¥ğ‘ ğ‘ ğœƒğœƒ ğ‘˜ğ‘˜ğ‘§ğ‘§ğ‘˜ğ‘˜ğ‘§ğ‘§ğ‘£ğ‘£ğœƒğœƒ + ğ‘ğ‘ğœƒğœƒ , with ğ‘£ğ‘£ğœƒğœƒ = 1 âˆ’ ğ‘ğ‘ğœƒğœƒ Deriving this is quite tedious. You can try this as an exercise (2.6). 33 Rotation Matrix to Equivalent Angle-Axis ğµğµ ğ´ğ´ğ‘¹ğ‘¹ğ¾ğ¾ ğœƒğœƒ = ğ‘Ÿğ‘Ÿ11 ğ‘Ÿğ‘Ÿ12 ğ‘Ÿğ‘Ÿ13 ğ‘Ÿğ‘Ÿ21 ğ‘Ÿğ‘Ÿ22 ğ‘Ÿğ‘Ÿ23 ğ‘Ÿğ‘Ÿ31 ğ‘Ÿğ‘Ÿ32 ğ‘Ÿğ‘Ÿ33 ğœƒğœƒ = acos ğ‘Ÿğ‘Ÿ11+ ğ‘Ÿğ‘Ÿ22+ ğ‘Ÿğ‘Ÿ33âˆ’ 1 2 ï¿½ğ‘²ğ‘² = 1 2 sin ğœƒğœƒ ğ‘Ÿğ‘Ÿ32âˆ’ ğ‘Ÿğ‘Ÿ23 ğ‘Ÿğ‘Ÿ13âˆ’ ğ‘Ÿğ‘Ÿ31 ğ‘Ÿğ‘Ÿ21âˆ’ ğ‘Ÿğ‘Ÿ12 Given a rotation matrix: An angle-axis pair can be computed as: Note that: ğœƒğœƒ, ï¿½ğ‘²ğ‘² = âˆ’ğœƒğœƒ, âˆ’ ï¿½ğ‘²ğ‘² 34 Recap: What have we discussed today â€¢ The problems with mathematically modeling 3D orientations/rotations. â€¢ Angle-set conventions â€¢ Fixed angles â€¢ Euler angles â€¢ Gimbal Lock â€¢ Equivalent Angle-Axis â€¢ Conversions between representations There are various ways to represent orientation in 3D space. When choosing one or another, it is important to keep in mind the application (e.g. calculations or visualization) and the limitations of the representation (e.g. Gimbal lock). Take home message: 35 Thank you for today. IÃ±igo Iturrate inju@mmmi.sdu.dk Ã˜27-604-3","libVersion":"0.2.4","langs":""}